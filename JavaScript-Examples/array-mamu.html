<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Management</title>
    <!-- Bootstrap & Icons -->
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="../node_modules/bootstrap-icons/font/bootstrap-icons.css">
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>
        
    <script type="text/javascript">
        var menuItems = ["Home", "Shop"];

        function LoadMenuItems() {
            var selectBox = document.getElementById("IsMenuItems");
            selectBox.innerHTML = ""; 
            menuItems.map(function(item) {
                var option = document.createElement("option");
                option.text = item;
                option.value = item;
                selectBox.appendChild(option);
            });
            document.getElementById("lblCount").innerText = menuItems.length;
        }

        function AddClick() {
            var item_Name = document.getElementById("txtName").value;
            if(item_Name.trim() === "") {
                alert("Please enter a name.");
                return;
            }
            if(menuItems.indexOf(item_Name) == -1) {
                menuItems.push(item_Name); // Fixed: item_Name used
                alert(`${item_Name} added Successfully...`);
                LoadMenuItems();
                document.getElementById("txtName").value = "";
            } else {
                alert(`${item_Name} already exists.`);
            }
        }

        function RemoveClick() {
            var selectedItem = document.getElementById("IsMenuItems").value;
            if(!selectedItem) { alert("Please select an item to remove."); return; }
            
            var selectedIndex = menuItems.indexOf(selectedItem);
            var flag = confirm(`Are you sure you want to remove ${selectedItem}?`);
            if(flag) {
                menuItems.splice(selectedIndex, 1);
                LoadMenuItems();
            }
        }

        function RemoveAllClick() {
            if(confirm("Remove all items?")) {
                menuItems.length = 0;
                LoadMenuItems();
            }
        }

        function EditClick() {
            var selectedItem = document.getElementById("IsMenuItems").value;
            if(!selectedItem) { alert("Please select an item to edit."); return; }
            document.getElementById("txtEdit").value = selectedItem;
        }

        function SaveClick() {
            var newValue = document.getElementById("txtEdit").value;
            var selectedItem = document.getElementById("IsMenuItems").value;
            var selectedIndex = menuItems.indexOf(selectedItem);
            if(selectedIndex !== -1) {
                menuItems[selectedIndex] = newValue;
                LoadMenuItems();
            }
        }

        function SortAsc() {
            menuItems.sort();
            LoadMenuItems();
        }

        function SortDesc() {
            menuItems.sort();
            menuItems.reverse();
            LoadMenuItems();
        }
    </script>
</head>
<body class="container-fluid" onload="LoadMenuItems()">
    <div class="mt-3 w-50">
        <h2>Design Your Menu</h2>
        
        <!-- Add Item -->
        <div class="mb-3">
            <label class="form-label fw-bold">Add Menu Item</label>
            <div class="input-group">
                <input type="text" placeholder="New Menu Item Name" class="form-control" id="txtName"> 
                <button onclick="AddClick()" class="btn btn-primary">Add</button>
            </div>
        </div>

        <!-- Menu List -->
        <div class="my-2">
            <label class="form-label fw-bold">Menu Items <span class="badge bg-danger" id="lblCount"></span></label>
            <div class="mb-2">
                <button onclick="SortAsc()" class="bi bi-sort-alpha-down btn btn-success"></button>
                <button onclick="SortDesc()" class="bi bi-sort-alpha-up btn btn-warning"></button>
            </div>
            
            <select class="form-select" size="5" id="IsMenuItems">
                <!-- Items Load Here -->
            </select>

            <div class="mt-3 row">
                <div class="col">
                    <button data-bs-toggle="modal" data-bs-target="#editModal" onclick="EditClick()" class="btn w-100 btn-warning bi bi-pen-fill"> Edit</button>
                </div>
                <div class="col">
                    <button onclick="RemoveClick()" class="btn btn-danger w-100 bi bi-trash-fill"> Remove</button>
                </div>
                <div class="col">
                    <button onclick="RemoveAllClick()" class="btn btn-dark w-100 bi bi-trash"> Remove All</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Item</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="txtEdit" class="form-control">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" data-bs-dismiss="modal" onclick="SaveClick()">Save</button>
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
